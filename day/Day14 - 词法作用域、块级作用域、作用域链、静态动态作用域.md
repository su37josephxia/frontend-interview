# Day14 - è¯æ³•ä½œç”¨åŸŸã€å—çº§ä½œç”¨åŸŸã€ä½œç”¨åŸŸé“¾ã€é™æ€åŠ¨æ€ä½œç”¨åŸŸ



### é‚£äº›å¹´å¬è¯´çš„ä½œç”¨åŸŸ

- å…¨å±€ä½œç”¨åŸŸ
- å‡½æ•°ä½œç”¨åŸŸ
- å—ä½œç”¨åŸŸ
- è¯æ³•ä½œç”¨åŸŸ
- åŠ¨æ€ä½œç”¨åŸŸ
- å…¨å±€ä½œç”¨åŸŸ
- ä½œç”¨åŸŸé“¾

## ä½œç”¨åŸŸ

**ä½œç”¨åŸŸï¼ˆè‹±æ–‡ï¼šscopeï¼‰æ˜¯æ®åç§°æ¥æŸ¥æ‰¾å˜é‡çš„ä¸€å¥—è§„åˆ™**ï¼Œå¯ä»¥æŠŠä½œç”¨åŸŸé€šä¿—ç†è§£ä¸ºä¸€ä¸ªå°é—­çš„ç©ºé—´ï¼Œè¿™ä¸ªç©ºé—´æ˜¯å°é—­çš„ï¼Œä¸ä¼šå¯¹å¤–éƒ¨äº§ç”Ÿå½±å“ï¼Œå¤–éƒ¨ç©ºé—´ä¸èƒ½è®¿é—®å†…éƒ¨ç©ºé—´ï¼Œä½†æ˜¯å†…éƒ¨ç©ºé—´å¯ä»¥è®¿é—®å°†å…¶åŒ…è£¹åœ¨å†…çš„å¤–éƒ¨ç©ºé—´ã€‚



è¯´ç™½äº†å°±æ˜¯ä¸€é—¨è¯­è¨€å¦‚æœå£°æ˜çš„å˜é‡éƒ½æ”¾åœ¨å…¨å±€ï¼Œç¨‹åºè§„æ¨¡å°è¿˜è¡Œå¦‚æœè§„æ¨¡ä¸€å¤§è‚¯å®šå°±ä¸è¡Œäº†ã€‚æ‰€ä»¥å°±ä¼šé‡‡ç”¨å„ç§æ–¹æ¡ˆæ¥ç¡®å®šå‡½æ•°çš„ä½œç”¨åŸŸã€‚





![image-20220114233134114](https://gitee.com/josephxia/picgo/raw/master/juejin/image-20220114233134114.png)



## é™æ€ä½œç”¨åŸŸä¸åŠ¨æ€ä½œç”¨åŸŸ

### é™æ€ä½œç”¨åŸŸ(static scope) ä¸ è¯æ³•ä½œç”¨åŸŸ(lexical scope)

å…¶å®å°±æ˜¯æŒ‡çš„è¯æ³•ä½œç”¨åŸŸï¼Œæ‰€è°“é™æ€ä½œç”¨åŸŸï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨ç¨‹åºç¼–è¯‘æœŸé€šè¿‡å¯¹æºä»£ç çš„è¯æ³•åˆ†æå°±å¯ä»¥ç¡®å®šæŸä¸ªæ ‡è¯†ç¬¦å±äºå“ªä¸ªä½œç”¨åŸŸã€ä½œç”¨åŸŸçš„åµŒå¥—å…³ç³»ï¼ˆä½œç”¨åŸŸé“¾ï¼‰ï¼Œåœ¨ä¹¦å†™æºä»£ç æ—¶è¿™äº›å…³ç³»å°±å·²ç»ç¡®ç«‹äº†ã€‚

è¯æ³•åˆ†ææ˜¯ç¼–è¯‘ä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€ç¯ã€‚

![image-20220114204244894](https://gitee.com/josephxia/picgo/raw/master/juejin/image-20220114204244894.png)



```js
// é™æ€ä½œç”¨åŸŸï¼š
var a = 10;
function fn() {
	var b = 1;
	console.log(a + b);
}

fn(); // 11
```



### åŠ¨æ€ä½œç”¨åŸŸ(dynamic scope)

åŠ¨æ€ä½œç”¨åŸŸæ˜¯åœ¨è¿è¡Œæ—¶ç¡®å®šçš„ï¼Œè¯æ³•ä½œç”¨åŸŸå…³æ³¨å‡½æ•°åœ¨**ä½•å¤„å£°æ˜**ï¼Œè€ŒåŠ¨æ€ä½œç”¨åŸŸå…³æ³¨å‡½æ•°ä»**ä½•å¤„è°ƒç”¨**ï¼Œå…¶ä½œç”¨åŸŸé“¾æ˜¯åŸºäºè¿è¡Œæ—¶çš„è°ƒç”¨æ ˆçš„ã€‚

jsè¯­è¨€ä¸­çš„å˜ç°ä¸ºthis ä¹Ÿå°±æ˜¯ä¸Šä¸‹æ–‡ç¯å¢ƒ

```js
function say() {
  debugger
  console.log('æˆ‘çš„å®¶ä¹¡:' + this.name)
}
var china = {
  name: 'ä¸­å›½',
  say,
  beijing :{
  	name: 'åŒ—äº¬',
  	say
}
}
setInterval(() => Math.random() > 0.5 ? china.say() : china.beijing.say() , 1000)

```

å› ä¸º this æ˜¯æŒ‡å‘çš„æ˜¯å‡½æ•°è¿è¡Œæ—¶æ‰€åœ¨çš„ç¯å¢ƒï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰åˆ°äº†æ‰§è¡Œæ—¶æ‰èƒ½ç¡®å®šã€‚

### æ‰©å±•

å…¶å®åŠ¨æ€ä¸é™æ€çš„é—®é¢˜åœ¨æ¯ç§è¯­è¨€ä¸­éƒ½å­˜åœ¨ï¼Œ

æ¯”å¦‚ï¼š

- C++  åŠ¨æ€è”ç¼–ä¸é™æ€è”ç¼– - è™šå‡½æ•°
- Java åŠ¨æ€ç¼–è¯‘ä¸åŠ¨æ€åŠ è½½



## å‡½æ•°ä½œç”¨åŸŸ ä¸ å—çº§ä½œç”¨åŸŸ

ä¸‹é¢æˆ‘ä»¬ç»†è‡´çš„è¯´ä¸€ä¸‹å‡½æ•°ä½œç”¨åŸŸå’Œå—çº§ä½œç”¨åŸŸã€‚

å¯¹äºJSè¿™ç§å‡½æ•°å¼è¯­è¨€ï¼Œå‡½æ•°æ˜¯ä¸€ç­‰å…¬æ°‘ï¼Œç”šè‡³æœ‰äººæƒ³è¿‡ç”¨å‡½æ•°è§£å†³æ‰€æœ‰é—®é¢˜ã€‚

æ‰€ä»¥æˆ‘ä»¬é¦–å…ˆè¯´è¯´é™æ€ä½œç”¨åŸŸçš„åŸºç¡€å‡½æ•°ä½œç”¨åŸŸã€‚

> å‡½æ•°ä½œç”¨åŸŸï¼šæŒ‡åœ¨å‡½æ•°å†…å£°æ˜çš„æ‰€æœ‰å˜é‡åœ¨**å‡½æ•°ä½“å†…**å§‹ç»ˆæ˜¯å¯è§çš„ï¼Œå¯ä»¥åœ¨æ•´ä¸ªå‡½æ•°çš„èŒƒå›´å†…ä½¿ç”¨åŠå¤ç”¨ã€‚

```js
var a = 'a'
function f1() {
    var b = 'b'
    function f2() {
        var c = 'c'
        function f3() {
          if(true) {
          	var d = 'd'
        	}
          console.log(a, b, c, d)
          debugger
        }
      	f3()
    }
  	f2()
}
f1()
```

### ä½œç”¨åŸŸé“¾

> ECMA-262æ ‡å‡†ç¬¬ä¸‰ç‰ˆå®šä¹‰ï¼Œè¯¥å†…éƒ¨å±æ€§åŒ…å«äº†å‡½æ•°è¢«åˆ›å»ºçš„ä½œç”¨åŸŸä¸­å¯¹è±¡çš„é›†åˆï¼Œè¿™ä¸ªé›†åˆè¢«ç§°ä¸ºå‡½æ•°çš„ä½œç”¨åŸŸé“¾

![image-20220114224032095](https://gitee.com/josephxia/picgo/raw/master/juejin/image-20220114224032095.png)

### å—çº§ä½œç”¨åŸŸ

> å—ä½œç”¨åŸŸæ˜¯ä¸€ä¸ªç”¨æ¥å¯¹ä¹‹å‰çš„æœ€å°æˆæƒåŸåˆ™è¿›è¡Œæ‰©å±•çš„å·¥å…·ï¼Œå°†ä»£ç ä»åœ¨å‡½æ•°ä¸­éšè—ä¿¡æ¯æ‰©å±•ä¸ºåœ¨å—ä¸­éšè—ä¿¡æ¯ã€‚

ä¸ºäº†ä¸å…¶ä»–ä¸»æµè¯­è¨€é è¿‘ï¼Œå—çº§ä½œç”¨åŸŸæ˜¯ES6æ¨å‡ºäº†letã€constå®ç°å—çº§ä½œç”¨åŸŸã€‚

```js
var a = 'a'
function f1() {
    var b = 'b'
    function f2() {
        var c = 'c'
        function f3() {
          if(true) {
            debugger
          	let d = 'd' // var æ”¹ä¸º let
        	}
          debugger
          console.log(a, b, c, d)
        }
      	f3()
    }
  	f2()
}
f1()
```

ä¸Šé¢åªæ˜¯å°†å˜é‡dæ”¹ä¸ºä½¿ç”¨letå£°æ˜

![image-20220115002552157](https://gitee.com/josephxia/picgo/raw/master/juejin/image-20220115002552157.png)

ä½†æ˜¯è¿è¡Œç»“æœå°±å‘ç”Ÿäº†å˜åŒ–

![image-20220114233714015](https://gitee.com/josephxia/picgo/raw/master/juejin/image-20220114233714015.png)



å‘ç”Ÿçš„åŸå› å°±æ˜¯ä½¿ç”¨varå£°æ˜æ—¶ï¼Œå˜é‡dçš„ä½œç”¨åŸŸåœ¨å‡½æ•°å†…ã€‚

è€Œä½¿ç”¨letå£°æ˜æ—¶ï¼Œä½œç”¨åŸŸåªåœ¨ifä»£ç å—å†…ã€‚



## é¢è¯•æ”»ç•¥

- è¿™é“é¢˜å…¶å®æ˜¯ä¸€ä¸ªåŸºç¡€é¢˜ï¼Œæ²¡æœ‰ä¸€ä¸ªäººä¸å›ç­”ã€‚å›ç­”çš„å…³é”®æ˜¯åœ¨æè¿°çš„ç³»ç»Ÿæ€§ä¸Šé¢ã€‚æ¯”å¦‚ä½ ç¡¬è¯´è¯æ³•ä½œç”¨åŸŸå’ŒåŠ¨æ€ä½œç”¨åŸŸç»„æˆäº†JSçš„ä½œç”¨åŸŸä½“ç³»å°±å¾ˆå¥‡æ€ªã€‚ä¸åœ¨ä¸€ä¸ªç»´åº¦çš„æè¿°ä¼šè®©äººè§‰å¾—æè¿°ä¸å¤Ÿç³»ç»Ÿå’Œå…¨é¢ã€‚


![image-20220114233134114](https://gitee.com/josephxia/picgo/raw/master/juejin/image-20220114233134114.png)





## 365å¤©æ‰“å¡è®°å½•

ğŸ”¥ åˆ›ä½œä¸æ˜“ã€å¤§å®¶å¸®ç„¶å” Bæ ˆ ä¸€é”®ä¸‰è¿

- [å¦‚ä½•åˆ©ç”¨é—­åŒ…å®Œæˆç±»åº“å°è£…] [ ğŸ“º Billbillè§†é¢‘ ](https://www.bilibili.com/video/BV1gr4y1U7pY?p=12) [ ğŸ“š æ˜é‡‘æ–‡ç¨¿ ](https://juejin.cn/post/7052238635671748616) [ ğŸ± Github ](https://github.com/su37josephxia/frontend-interview/issues/56)
- [è°ˆè°ˆé—­åŒ…ä¸å³æ—¶å‡½æ•°çš„åº”ç”¨] [ ğŸ“º Billbillè§†é¢‘ ](https://www.bilibili.com/video/BV1gr4y1U7pY?p=11) [ ğŸ“š æ˜é‡‘æ–‡ç¨¿ ](https://juejin.cn/post/7051968010512236574) [ ğŸ± Github ](https://github.com/su37josephxia/frontend-interview/issues/55)
- [åˆ†æä¸€ä¸‹ç®­å¤´è¯­æ³•ä¸ºä»€ä¹ˆä¸èƒ½å½“åšæ„é€ å‡½æ•°] [ ğŸ“º Billbillè§†é¢‘ ](https://www.bilibili.com/video/BV1gr4y1U7pY?p=7) [ ğŸ“š æ˜é‡‘æ–‡ç¨¿ ](https://juejin.cn/post/7050476297318825992) [ ğŸ± Github ](https://github.com/su37josephxia/frontend-interview/issues/25)
- [é—­åŒ…ä¸ç§‘é‡ŒåŒ–ã€ååº”ç”¨å‡½æ•°çš„å…³ç³»] [ ğŸ“º Billbillè§†é¢‘ ](https://www.bilibili.com/video/BV1gr4y1U7pY?p=10) [ ğŸ“š æ˜é‡‘æ–‡ç¨¿ ](https://juejin.cn/post/7051547767855906852) [ ğŸ± Github ](https://github.com/su37josephxia/frontend-interview/issues/54)
- [å¦‚ä½•ç”¨é—­åŒ…åˆ¶é€ æƒ°æ€§å‡½æ•°?] [ ğŸ“º Billbillè§†é¢‘ ](https://www.bilibili.com/video/BV1gr4y1U7pY?p=9) [ ğŸ“š æ˜é‡‘æ–‡ç¨¿ ](https://juejin.cn/post/7051233635608821797/) [ ğŸ± Github ](https://github.com/su37josephxia/frontend-interview/issues/23)
- [ä»€ä¹ˆæ˜¯é—­åŒ…ï¼Ÿå¦‚ä½•äº§ç”Ÿé—­åŒ…] [ ğŸ“º Billbillè§†é¢‘ ](https://www.bilibili.com/video/BV1gr4y1U7pY?p=8) [ ğŸ“š æ˜é‡‘æ–‡ç¨¿ ](https://juejin.cn/post/7050861660000976904) [ ğŸ± Github ](https://github.com/su37josephxia/frontend-interview/issues/20)
- [new ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå¦‚æœå‡½æ•°è¿”å› `return {}` ã€ `return null` ï¼Œ `return 1` ï¼Œ `return true` ä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µï¼Ÿ] [ ğŸ“º Billbillè§†é¢‘ ](https://www.bilibili.com/video/BV1gr4y1U7pY?p=6) [ ğŸ“š æ˜é‡‘æ–‡ç¨¿ ](https://juejin.cn/post/7050087767962976287) [ ğŸ± Github ](https://github.com/su37josephxia/frontend-interview/issues/7)
- [new ä¸€ä¸ªå‡½æ•°å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ] [ ğŸ“º Billbillè§†é¢‘ ](https://www.bilibili.com/video/BV1gr4y1U7pY?p=5) [ ğŸ“š æ˜é‡‘æ–‡ç¨¿ ](https://juejin.cn/post/7049731312801808420) [ ğŸ± Github ](https://github.com/su37josephxia/frontend-interview/issues/6)
- [åˆ¤æ–­æ•°æ®ç±»å‹çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿ] [ ğŸ“º Billbillè§†é¢‘ ](https://www.bilibili.com/video/BV1gr4y1U7pY?p=4) [ ğŸ“š æ˜é‡‘æ–‡ç¨¿ ](https://juejin.cn/post/7049383966700208165) [ ğŸ± Github ](https://github.com/su37josephxia/frontend-interview/issues/5)
- [Number() çš„å­˜å‚¨ç©ºé—´æ˜¯å¤šå¤§ï¼Ÿå¦‚æœåå°å‘é€äº†ä¸€ä¸ªè¶…è¿‡æœ€å¤§é™åˆ¶çš„æ•°å­—æ€ä¹ˆåŠ?] [ ğŸ“º Billbillè§†é¢‘ ](https://www.bilibili.com/video/BV1gr4y1U7pY?p=3) [ ğŸ“š æ˜é‡‘æ–‡ç¨¿ ](https://juejin.cn/post/7048998409067298830) [ ğŸ± Github ](https://github.com/su37josephxia/frontend-interview/issues/4)
- [0.1 + 0.2 === 0.3 å˜›ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿ] [ ğŸ“º Billbillè§†é¢‘ ](https://www.bilibili.com/video/BV1gr4y1U7pY?p=2) [ ğŸ“š æ˜é‡‘æ–‡ç¨¿ ](https://juejin.cn/post/7048554678858022925) [ ğŸ± Github ](https://github.com/su37josephxia/frontend-interview/issues/2)
- [JS æ•´æ•°æ˜¯æ€ä¹ˆè¡¨ç¤ºçš„ï¼Ÿ] [ ğŸ“º Billbillè§†é¢‘ ](https://www.bilibili.com/video/BV1gr4y1U7pY?p=1) [ ğŸ“š æ˜é‡‘æ–‡ç¨¿ ](https://juejin.cn/post/7048191028280426526) [ ğŸ± Github ](



